#!/usr/bin/env python3# -*- coding: utf-8 -*-"""Created on Wed Sep 15 @author: alexandrebelli"""import requestsimport pandas as pdimport streamlit as stimport altair as altimport osimport dotenvfrom dotenv import load_dotenvimport numpy as npfrom bokeh.plotting import figure, showdef datetime(x):    return np.array(x, dtype=np.datetime64)st.title("Visualizing Time Series Stock")#symbol = 'BA'#user_input = symbol = st.sidebar.text_input("Stock Symbol", 'IBM')load_dotenv()CONSUMER_KEY = os.environ.get("Key")# replace the "demo" apikey below with your own key from https://www.alphavantage.co/support/#api-key#url = 'https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol='+symbol+'&apikey='+CONSUMER_KEY#r = requests.get(url)#data = pd.read_json(url)##data = r.json()##data= pd.json_normalize(data['Time Series (Daily)'])#print(data)url = 'https://www.alphavantage.co/query?function=TIME_SERIES_WEEKLY_ADJUSTED&symbol='+str(symbol)+'&apikey='+str(CONSUMER_KEY)+'&datatype=csv'#r = requests.get(url)#print('checkPoint')data = pd.read_csv(url)#data = r.json()#data= pd.json_normalize(data['Time Series (Daily)'])data['timestamp'] = datetime(data['timestamp'])data2 = data.drop(columns=['open', 'high','low','adjusted close', 'volume', 'dividend amount'])#print(data2)#p = figure(x_axis_type="datetime", title="Stock Closing Prices")#p.line(data2['timestamp'],data2['close'], color="#ff7f0e", line_width=3, line_alpha=0.6)#show(p)##print('DONE')#st.bokeh_chart(p)c = alt.Chart(data2).mark_line().encod(x='Date', y='Closing Price')st.altair_chart(c, use_container_width=True)