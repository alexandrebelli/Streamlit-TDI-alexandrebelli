#!/usr/bin/env python3# -*- coding: utf-8 -*-"""Created on Wed Sep 15 @author: alexandrebelli"""import requestsimport pandas as pdimport streamlit as stimport plotly.express as pximport osimport dotenvfrom dotenv import load_dotenvimport numpy as npdef datetime(x):    return np.array(x, dtype=np.datetime64)st.title("Visualizing Time Series Stock")symbol = st.sidebar.text_input("Stock Symbol", 'IBM')load_dotenv()CONSUMER_KEY = os.environ.get("Key")url = 'https://www.alphavantage.co/query?function=TIME_SERIES_WEEKLY_ADJUSTED&symbol='+str(symbol)+'&apikey='+str(CONSUMER_KEY)+'&datatype=csv'data = pd.read_csv(url)data['timestamp'] = datetime(data['timestamp'])data2 = data.drop(columns=['open', 'high','low','adjusted close', 'volume', 'dividend amount'])data2['year'] = data2['timestamp'].dt.yeardata2['month'] = data2['timestamp'].dt.monthyear = st.sidebar.text_input("year [1999 - 2021]",1999)month = st.sidebar.text_input("month (0,1,...12)",1)data3 = data2.loc[(data2["year"] == year) & (data2["month"] == month)]#print(data3)fig = px.line(data3, x="timestamp", y="close")st.plotly_chart(fig, use_container_width=True)